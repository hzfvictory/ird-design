{"version":3,"sources":["webpack:///./examples/components/OnlineRun/spilt.vue?d4cb","webpack:///./examples/components/OnlineRun/index.vue?7a64","webpack:///./examples/components/OnlineRun/index.vue?2b68","webpack:///./examples/components/OnlineRun/codeMirror/codeDefault.js","webpack:///./examples/components/OnlineRun/spilt.vue?45b9","webpack:///examples/components/OnlineRun/spilt.vue","webpack:///./examples/components/OnlineRun/spilt.vue?55c6","webpack:///./examples/components/OnlineRun/spilt.vue?61b8","webpack:///./examples/components/OnlineRun/index.vue?8561","webpack:///examples/components/OnlineRun/index.vue","webpack:///./examples/components/OnlineRun/index.vue?4b45"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","icon","size","on","click","handleRun","_v","staticStyle","handleReset","model","value","split","callback","$$v","expression","ref","slot","options","code","id","_withStripped","mousemove","lineMove","_t","mousedown","beginMove","mouseup","endMove","component","__file"],"mappings":"sIAAA,Q,iCCAA,Q,wCCAA,IAAIA,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACTC,EAAKJ,EAAIK,MAAMD,IAAMF,EACzB,OAAOE,EAAG,MAAO,CAAEE,YAAa,cAAgB,CAC9CF,EACE,MACA,CAAEE,YAAa,mBACf,CACEF,EACE,YACA,CACEG,MAAO,CAAEC,KAAM,gBAAiBC,KAAM,SACtCC,GAAI,CAAEC,MAAOX,EAAIY,YAEnB,CAACZ,EAAIa,GAAG,sBAEVT,EACE,YACA,CACEU,YAAa,CAAE,cAAe,QAC9BP,MAAO,CAAEC,KAAM,mBAAoBC,KAAM,SACzCC,GAAI,CAAEC,MAAOX,EAAIe,cAEnB,CAACf,EAAIa,GAAG,uBAGZ,GAEFT,EACE,MACA,CAAEE,YAAa,QACf,CACEF,EACE,aACA,CACEY,MAAO,CACLC,MAAOjB,EAAIkB,MACXC,SAAU,SAASC,GACjBpB,EAAIkB,MAAQE,GAEdC,WAAY,UAGhB,CACEjB,EAAG,aAAc,CACfkB,IAAK,SACLf,MAAO,CAAEgB,KAAM,OAAQC,QAASxB,EAAIwB,SACpCD,KAAM,OACNP,MAAO,CACLC,MAAOjB,EAAIyB,KACXN,SAAU,SAASC,GACjBpB,EAAIyB,KAAOL,GAEbC,WAAY,UAGhBjB,EAAG,MAAO,CACRG,MAAO,CAAEgB,KAAM,QAASG,GAAI,WAC5BH,KAAM,WAGV,IAGJ,MAKNxB,EAAO4B,eAAgB,E,oBCnEP,G,+KAAA,qNCHZ,EAAS,WACX,IACIzB,EADMD,KACGE,eACTC,EAFMH,KAEGI,MAAMD,IAAMF,EACzB,OAAOE,EACL,MACA,CACEE,YAAa,aACbC,MAAO,CAAEmB,GAAI,cACbhB,GAAI,CAAEkB,UARA3B,KAQe4B,WAEvB,CACEzB,EACE,MACA,CAAEkB,IAAK,OAAQhB,YAAa,iBAAkBC,MAAO,CAAEmB,GAAI,SAC3D,CAdIzB,KAcC6B,GAAG,SACR,GAEF1B,EAAG,MAAO,CACRkB,IAAK,OACLhB,YAAa,kBACbI,GAAI,CAAEqB,UApBF9B,KAoBiB+B,UAAWC,QApB5BhC,KAoByCiC,WAE/C9B,EACE,MACA,CACEkB,IAAK,QACLhB,YAAa,kBACbC,MAAO,CAAEmB,GAAI,UAEf,CA7BIzB,KA6BC6B,GAAG,UACR,MAMR,EAAOH,eAAgB,ECjBvB,ICpB0R,EDoB1R,CACE,KAAF,YACE,MAAF,CACI,MAAJ,CACM,KAAN,OACM,QAAN,GACM,UAAN,GACA,WAIE,KAAF,KACA,CACM,SAAN,IAGE,QAAF,CACI,WAEE,IAAN,qBACA,yBACM,KAAN,yBACM,KAAN,yBACM,KAAN,yBAEI,YACE,KAAN,YAEI,SAAJ,GACM,GAAN,cACQ,IAAR,2CACA,UACA,MAEA,GADA,QACA,KACA,YACA,gBACQ,KAAR,yBACQ,KAAR,yBACQ,KAAR,0BAGI,UACE,KAAN,aAGE,UACE,KAAJ,WACI,KAAJ,oD,gBE5DIQ,EAAY,YACd,EACA,EH0BoB,IGxBpB,EACA,KACA,WACA,MAuBFA,EAAUX,QAAQY,OAAS,0CACZ,MAAAD,E,gBCvC2Q,ECuC1R,CACE,KAAF,YACE,WAAF,CACI,WAAJ,aACI,UAAJ,GAEE,KAAF,KACA,CACM,KAAN,EACM,MAAN,GACM,QAAN,GACM,QAAN,CACQ,KAAR,MACQ,aAAR,EACQ,mBAAR,EACQ,eAAR,EACQ,eAAR,EACQ,yBAAR,EACQ,QAAR,EAEQ,YAAR,EACQ,QAAR,CAEQ,yBACR,wBACA,2BAEQ,WAAR,EACQ,iBAAR,GAEM,KAAN,EACM,SAAN,CACQ,SAAR,GACQ,OAAR,GACQ,MAAR,GACQ,KAAR,EACQ,UAAR,QAIE,QAAF,CAEI,YACE,KAAN,kBACM,KAAN,YACM,KAAN,iBAGI,cACE,KAAN,OACM,KAAN,mBAGI,kBACJ,0BACQ,KAAR,iDACQ,KAAR,8BACQ,KAAR,yBAGM,IAAN,8CACA,iCAEI,YACE,KAAN,oDACM,KAAN,8CACM,KAAN,gBACA,qEACA,cAGI,gBACE,KAAN,iBAGM,MAAN,uCACM,EAAN,gCACM,IAAN,sBAIM,GAHA,KAAN,oCACM,KAAN,iDAEA,wBACQ,IAAR,kCACQ,EAAR,gBACQ,EAAR,sBACQ,EAAR,8BACQ,SAAR,uBAIE,UACE,KAAJ,2CAEI,IAAJ,kDACI,GAAJ,GACM,IAAN,IACA,eAEM,GAAN,kBACQ,IAAR,KACQ,EAAR,0BAEM,KAAN,OAGI,KAAJ,YAEI,KAAJ,mCAAM,GAAN,EAAM,KAAN,KAIE,gBACE,IAAJ,8CACA,kCChJI,G,OAAY,YACd,EACApC,ER2DoB,IQzDpB,EACA,KACA,KACA,OAuBF,EAAUyB,QAAQY,OAAS,0CACZ,Y","file":"static/js/3.349be539.bundle.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/cache-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spilt.vue?vue&type=style&index=0&id=b9835028&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/sass-loader/dist/cjs.js!../../../node_modules/postcss-loader/dist/cjs.js!../../../node_modules/cache-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"online-run\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"codemirror-head\" },\n      [\n        _c(\n          \"el-button\",\n          {\n            attrs: { icon: \"ird-icon-play\", size: \"small\" },\n            on: { click: _vm.handleRun }\n          },\n          [_vm._v(\"\\n      运行\\n    \")]\n        ),\n        _c(\n          \"el-button\",\n          {\n            staticStyle: { \"margin-left\": \"20px\" },\n            attrs: { icon: \"ird-icon-refresh\", size: \"small\" },\n            on: { click: _vm.handleReset }\n          },\n          [_vm._v(\"\\n      重置\\n    \")]\n        )\n      ],\n      1\n    ),\n    _c(\n      \"div\",\n      { staticClass: \"main\" },\n      [\n        _c(\n          \"spilt-code\",\n          {\n            model: {\n              value: _vm.split,\n              callback: function($$v) {\n                _vm.split = $$v\n              },\n              expression: \"split\"\n            }\n          },\n          [\n            _c(\"codemirror\", {\n              ref: \"myCode\",\n              attrs: { slot: \"left\", options: _vm.options },\n              slot: \"left\",\n              model: {\n                value: _vm.code,\n                callback: function($$v) {\n                  _vm.code = $$v\n                },\n                expression: \"code\"\n              }\n            }),\n            _c(\"div\", {\n              attrs: { slot: \"right\", id: \"show-el\" },\n              slot: \"right\"\n            })\n          ],\n          1\n        )\n      ],\n      1\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/**\n * 默认模板\n */\nexport default `<template>\n    <div>\n    \n    </div>\n</template>\n<script>\nexport default {\n  data () {\n    return {\n    \n    }\n  },\n  methods: {\n  \n  },\n  mounted () {\n  \n  }\n}\n</script>\n<style>\n</style>`;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"split-pane\",\n      attrs: { id: \"split-pane\" },\n      on: { mousemove: _vm.lineMove }\n    },\n    [\n      _c(\n        \"div\",\n        { ref: \"left\", staticClass: \"left-pane pane\", attrs: { id: \"left\" } },\n        [_vm._t(\"left\")],\n        2\n      ),\n      _c(\"div\", {\n        ref: \"line\",\n        staticClass: \"pane split-line\",\n        on: { mousedown: _vm.beginMove, mouseup: _vm.endMove }\n      }),\n      _c(\n        \"div\",\n        {\n          ref: \"right\",\n          staticClass: \"right-pane pane\",\n          attrs: { id: \"right\" }\n        },\n        [_vm._t(\"right\")],\n        2\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"split-pane\" id=\"split-pane\" @mousemove=\"lineMove\">\n    <div class=\"left-pane pane\" id=\"left\" ref=\"left\">\n      <slot name=\"left\"></slot>\n    </div>\n\n    <div\n      class=\"pane split-line\"\n      ref=\"line\"\n      @mousedown=\"beginMove\"\n      @mouseup=\"endMove\"\n    />\n\n    <div class=\"right-pane pane\" id=\"right\" ref=\"right\">\n      <slot name=\"right\"></slot>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"splitPane\",\n    props: {\n      value: {\n        type: Number,\n        default: 0.5,\n        validator: (value) => {\n          return 0 < value && value < 1;\n        },\n      },\n    },\n    data() {\n      return {\n        canMove: false,\n      };\n    },\n    methods: {\n      setWidth() {\n        //根据传入的left right 计算宽度比例\n        let leftWidth = `${this.value * 100}%`;\n        let rightWidth = `${(1 - this.value) * 100}%`;\n        this.$refs.left.style.right = rightWidth;\n        this.$refs.right.style.left = leftWidth;\n        this.$refs.line.style.left = leftWidth;\n      },\n      beginMove() {\n        this.canMove = true;\n      },\n      lineMove(e) {\n        if (this.canMove) {\n          let splitPane = this.splitPaneEl.getBoundingClientRect(),\n            splitPaneWidth = splitPane.width,\n            splitPaneX = splitPane.x;\n          let mouseX = e.pageX;\n          let value = (mouseX - splitPaneX) / splitPaneWidth,\n            leftWidth = `${value * 100}%`,\n            rightWidth = `${(1 - value) * 100}%`;\n          this.$refs.left.style.right = rightWidth;\n          this.$refs.right.style.left = leftWidth;\n          this.$refs.line.style.left = leftWidth;\n        }\n      },\n      endMove() {\n        this.canMove = false;\n      },\n    },\n    mounted() {\n      this.setWidth();\n      this.splitPaneEl = document.getElementById(\"split-pane\");\n    },\n  };\n</script>\n\n<style scoped lang=\"scss\">\n  .split-pane {\n    position: relative;\n    width: 100%;\n    height: 100%;\n\n    .pane {\n      position: absolute;\n      top: 0;\n      bottom: 0;\n    }\n\n    .left-pane {\n      left: 0;\n    }\n\n    .right-pane {\n      right: 0;\n      padding: 10px 10px 10px 16px;\n      overflow: auto;\n    }\n\n    .split-line {\n      width: 6px;\n      height: 100%;\n      background: #eee;\n      z-index: 10;\n      cursor: col-resize;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/cache-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spilt.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/cache-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spilt.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./spilt.vue?vue&type=template&id=b9835028&scoped=true&\"\nimport script from \"./spilt.vue?vue&type=script&lang=js&\"\nexport * from \"./spilt.vue?vue&type=script&lang=js&\"\nimport style0 from \"./spilt.vue?vue&type=style&index=0&id=b9835028&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b9835028\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/hzf/workspace/irdd/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('b9835028')) {\n      api.createRecord('b9835028', component.options)\n    } else {\n      api.reload('b9835028', component.options)\n    }\n    module.hot.accept(\"./spilt.vue?vue&type=template&id=b9835028&scoped=true&\", function () {\n      api.rerender('b9835028', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"examples/components/OnlineRun/spilt.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/cache-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/cache-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"online-run\">\n    <div class=\"codemirror-head\">\n      <el-button icon=\"ird-icon-play\" size=\"small\" @click=\"handleRun\">\n        运行\n      </el-button>\n      <el-button\n        icon=\"ird-icon-refresh\"\n        size=\"small\"\n        style=\"margin-left: 20px\"\n        @click=\"handleReset\"\n      >\n        重置\n      </el-button>\n    </div>\n\n    <div class=\"main\">\n      <spilt-code v-model=\"split\">\n        <codemirror\n          slot=\"left\"\n          v-model=\"code\"\n          :options=\"options\"\n          ref=\"myCode\"\n        />\n        <div slot=\"right\" id=\"show-el\"></div>\n      </spilt-code>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Vue from \"vue\";\n  // codemirror相关\n  import { codemirror } from \"vue-codemirror\";\n  import \"./codeMirror\";\n  import codeDefault from \"./codeMirror/codeDefault.js\";\n  import SpiltCode from \"./spilt.vue\";\n  import { getSource } from \"doc/utils/utils\";\n\n  export default {\n    name: \"OnlineRun\",\n    components: {\n      codemirror,\n      SpiltCode,\n    },\n    data() {\n      return {\n        code: codeDefault,\n        split: 0.4,\n        mountEl: \"\", // 展示容器\n        options: {\n          mode: \"vue\", // 代码类型\n          lineNumbers: true, // 显示行数\n          autoCloseBrackets: true,\n          matchBrackets: true, // 括号匹配\n          autoCloseTags: true,\n          showCursorWhenSelecting: true, // 选择是否处于活动状态时是否应绘制光标\n          tabSize: 4, // 制表符的宽度\n          // theme: 'base16-dark',\n          foldGutter: true, // 折叠代码\n          gutters: [\n            // 折可用于添加额外的排水沟\n            \"CodeMirror-linenumbers\",\n            \"CodeMirror-foldgutter\",\n            \"CodeMirror-lint-markers\",\n          ],\n          autofocus: true, // 可用于使CodeMirror将焦点集中在初始化上\n          styleActiveLine: true,\n        },\n        uuid: 1,\n        userCode: {\n          template: \"\",\n          script: \"\",\n          style: \"\",\n          uuid: 0,\n          component: null,\n        },\n      };\n    },\n    methods: {\n      // 运行代码\n      handleRun() {\n        this.unMountUserCode(); // 卸载\n        this.splitCode(); // 拼接代码\n        this.mountUserCode(); // 挂载\n      },\n      // 重置\n      handleReset() {\n        this.code = codeDefault;\n        this.unMountUserCode();\n      },\n      // 卸载\n      unMountUserCode() {\n        if (this.userCode.component) {\n          this.mountEl.removeChild(this.userCode.component.$el);\n          this.userCode.component.$destroy();\n          this.userCode.component = null;\n        }\n        // 清除样式\n        let userStyle = document.getElementById(this.userCode.uuid);\n        if (userStyle) document.head.removeChild(userStyle);\n      },\n      splitCode() {\n        this.userCode.template = getSource(this.code, \"template\");\n        this.userCode.style = getSource(this.code, \"style\");\n        this.userCode.script =\n          getSource(this.code, \"script\").replace(/export default/, \"return \") ||\n          `return  {}`; // 防止没有js代码导致的报错\n      },\n      // 挂载\n      mountUserCode() {\n        this.userCode.uuid += 1;\n\n        // 生成组件挂载\n        const parseStrToObj = new Function(this.userCode.script)();\n        parseStrToObj.template = this.userCode.template;\n        let userCodeComponent = Vue.extend(parseStrToObj);\n        this.userCode.component = new userCodeComponent().$mount();\n        this.mountEl.appendChild(this.userCode.component.$el);\n        // 添加样式\n        if (this.userCode.css !== \"\") {\n          let styleEl = document.createElement(\"style\");\n          styleEl.type = \"text/css\";\n          styleEl.id = this.userCode.uuid;\n          styleEl.innerHTML = this.userCode.style;\n          document.head.appendChild(styleEl);\n        }\n      },\n    },\n    mounted() {\n      this.mountEl = document.getElementById(\"show-el\");\n      // let code = this.$route.query.code;\n      let code = this.$route.params.code || this.$route.query.code;\n      if (code) {\n        let _html = code;\n        let firstCode = `<template>`;\n\n        if (code.indexOf(firstCode) !== 0) {\n          let index = 25;\n          _html = codeDefault.slice(0, index) + code + codeDefault.slice(index);\n        }\n        this.code = _html;\n      }\n\n      this.handleRun();\n      // 默认光标位置\n      this.$refs.myCode.codemirror.setCursor({ ch: 7, line: 2 });\n      // this.$refs.myCode.codemirror.replaceRange([1,23],pos2);\n    },\n    // 页面销毁必须销毁css 否则会导致样式全局污染\n    beforeDestroy() {\n      let userStyle = document.getElementById(this.userCode.uuid);\n      if (userStyle) document.head.removeChild(userStyle);\n    },\n  };\n</script>\n\n<style lang=\"scss\">\n  @import \"../../assets/styles/var\";\n\n  .online-run {\n    position: absolute;\n    width: 100%;\n    background: white;\n    z-index: 1000;\n\n    .vue-codemirror,\n    .CodeMirror {\n      height: 100%;\n    }\n\n    .codemirror-head {\n      display: flex;\n      align-items: center;\n      height: 70px;\n      padding: 0 10px;\n    }\n\n    .main {\n      border: 1px solid $border;\n      height: calc(100vh - 80px);\n      min-height: 800px;\n    }\n\n    /*    .cm-tag {\n          color: $color-primary;\n        }\n\n        .cm-attribute {\n          color: $color-danger;\n        }\n\n        .cm-string {\n          color: $color-success;\n        }\n\n        .CodeMirror-line {\n          color: $color-info;\n        }\n\n        .cm-property {\n          color: $color-warning;\n        }*/\n  }\n</style>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=16d21cec&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/hzf/workspace/irdd/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('16d21cec')) {\n      api.createRecord('16d21cec', component.options)\n    } else {\n      api.reload('16d21cec', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=16d21cec&\", function () {\n      api.rerender('16d21cec', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"examples/components/OnlineRun/index.vue\"\nexport default component.exports"],"sourceRoot":""}